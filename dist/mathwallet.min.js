!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"get_info",(function(){return b})),n.d(r,"abi_json_to_bin",(function(){return y})),n.d(r,"push_transaction",(function(){return w})),n.d(r,"get_table_rows",(function(){return _})),n.d(r,"get_account",(function(){return v})),n.d(r,"get_producers",(function(){return O})),n.d(r,"get_currency_balance",(function(){return P})),n.d(r,"get_account_registed",(function(){return T})),n.d(r,"get_actions",(function(){return A}));const o="undefined"!=typeof navigator?navigator.userAgent:"";"undefined"!=typeof navigator&&navigator.appVersion;var s={trident:o.indexOf("Trident")>-1,presto:o.indexOf("Presto")>-1,webKit:o.indexOf("AppleWebKit")>-1,gecko:o.indexOf("Gecko")>-1&&-1==o.indexOf("KHTML"),mobile:!!o.match(/AppleWebKit.*Mobile.*/),ios:!!o.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:o.indexOf("Android")>-1||o.indexOf("Adr")>-1,iPhone:o.indexOf("iPhone")>-1,iPad:o.indexOf("iPad")>-1,mdsApp:o.indexOf("MdsApp")>-1,mdsVer:o.indexOf("MdsApp")>-1?o.match(/MdsApp\/[^\s]+\s?/)[0].trim().split("/")[1]:"0"};var i=new class{constructor(t){t.mdsApp&&t.android?this.postMessageHandler=window.mds:t.mdsApp&&t.iPhone&&void 0!==window.webkit?this.postMessageHandler=window.webkit.messageHandlers.mds:this.postMessageHandler={postMessage:console.log}}sign_global_callback(t){if("function"==typeof t){let e="mdseosappcallback"+(new Date).getTime()+Math.floor(1e8*Math.random()+1e7);return window[e]=function(n){t(n),window[e]=null},console.log(e),e}return t}send(t,e={},n=!1){return new Promise((r,o)=>{let s={method:t,params:e,callback:this.sign_global_callback(t=>{if(n)return r(t);let e=JSON.parse(t);return e.error?o(e.error):r(e),!0})};try{this.postMessageHandler.postMessage(JSON.stringify(s))}catch(t){o(t)}})}}(s);let a=new Map;a.set(1,"ETH"),a.set(2,"NEO"),a.set(3,"EOS"),a.set(4,"EOSFORCE"),a.set(5,"ONT"),a.set(6,"BTC"),a.set(7,"ESN"),a.set(8,"TRX"),a.set(9,"NAS"),a.set(10,"BOS"),a.set(11,"ENU"),a.set(12,"TELOS"),a.set(13,"ZILLIQA"),a.set(14,"BINANCE"),a.set(15,"IRIS"),a.set(16,"COSMOS"),a.set(17,"CHAINX"),a.set(18,"CODEX"),a.set(19,"POLKADOT"),a.set(20,"VECHAIN"),a.set(21,"FT"),a.set(22,"COINEX"),a.set(19001,"KUSAMA");var c={getType:t=>a.has(t)?a.get(t):"UNKNOWN",getID(t){t=t.toUpperCase();for(const[e,n]of a)if(n==t)return e;return 0}};var u=class{isMath(){return s.mdsApp}openUrl(t){return i.send("openURL",{url:t})}openThirdApp(t){return i.send("openThirdApplication",{appSchemeURL:t})}close(){return i.send("close")}back(){return i.send("goBack")}fullScreen(t=1){return i.send("fullScreen",{mode:t})}orientation(t=0){let e="portrait";switch(t){case 1:e="landscape";break;default:e="portrait"}return i.send("deviceOrientation",{orientation:e})}share(t){return i.send("shareAction",{type:1,imageURL:t.img,activity:{type:"event",app:"app",event:"share",name:t.name,data:t.data}})}shareTo(t=1,e={}){return i.send("shareAction",{type:t,...e})}getAppInfo(){return i.send("getAppInfo")}getLanguage(){return new Promise((t,e)=>{i.send("getLanguage",{},!0).then(e=>{t(e)},e)})}getWalletType(){return new Promise((t,e)=>{i.send("activeWalletType").then(e=>{t(e.blockchain||c.getType(e.type))},e)})}getCurrentWalletType(){return this.getWalletType()}getCurrentWallet(){return i.send("activeWalletAccount")}walletPicker(t){return i.send("walletPicker",{blockchain:t})}getWallets(){return i.send("selectWallets")}getWalletList(t){let e=c.getID(t);return i.send("getWalletsWithType",{type:e,blockchain:t})}postCustomMessage(t,e){return i.send(t,e)}};class d{constructor(t=""){this.chain=t}}const l="BTC",h="NEO",p="EOS";var g=class extends d{constructor(){super(l)}transfer(...t){let e={};return e="object"==typeof t[0]?t[0]:{from:t[0],amount:t[1],to:t[2],memo:t[3]},e.symbol=e.symbol?e.symbol:"BTC",e.precision=e.precision?e.precision:6,i.send("sendTransaction",{blockchain:this.chain,action:"transfer",data:e})}};var f=class extends d{constructor(){super(h)}transfer(...t){let e={};return e="object"==typeof t[0]?t[0]:{from:t[0],amount:t[1],to:t[2],memo:t[3]},e.symbol=e.symbol?e.symbol:"NEO",e.precision=e.precision?e.precision:8,i.send("sendTransaction",{blockchain:this.chain,action:"transfer",data:e})}};var m=class{constructor(t){t&&(this.account=t.account?t.account:null,this.accountPermission=t.accountPermission?t.accountPermission:"active")}setAccount(t){this.account=t}getAccount(){return this.account}setAccountPermission(t){this.accountPermission=t}getAccountPermission(){return this.accountPermission}};const b="/v1/chain/get_info",y="/v1/chain/abi_json_to_bin",w="/v1/chain/push_transaction",_="/v1/chain/get_table_rows",v="/v1/chain/get_account",O="/v1/chain/get_producers",P="/v1/chain/get_currency_balance",T="/v1/chain/get_account",A="/v1/history/get_actions";var E=class{constructor(t){t&&(this.httpEndpoint=t.httpEndpoint?t.httpEndpoint:null,this.chainID=t.chainID?t.chainID:null,this.nodes=t.nodes?t.nodes:[]),t.defaultNode&&this.setNode(t.defaultNode)}setNode(t){return!(!this.nodes[t]||!this.nodes[t].jsonRpc)&&(this.chainID=t,this.httpEndpoint=this.nodes[t].jsonRpc,this.netChainID=this.nodes[t].chainID,!0)}getNode(){return this.chainID}getChainID(){return this.netChainID}getHttpEndPoint(){return this.httpEndpoint}getRpcUrl(t){if(void 0===r[t])throw new Error("undefined url");return this.getHttpEndPoint()+r[t]}};const S=(t,e="JSON")=>{switch(e=e.toLowerCase()){case"json":return t.json();case"html":return t.text();case"blob":return t.blob();default:return new Promise(e=>{e(t.body)})}};var k=class{static get(t){return void 0===t.dataType&&(t.dataType="JSON"),new Promise((e,n)=>{const r={method:"GET",headers:t.headers};fetch(t.url,r).then(r=>{r.ok?S(r,t.dataType).then(e,n):n(r.status)},t=>n(t))})}static post(t,e={},n={}){return n["Content-Type"]&&(n["Content-Type"]="application/json"),fetch(t,{method:"POST",headers:n,body:JSON.stringify(e)})}};var N=class extends d{constructor(){super(p),this.account=new m}init(t){return this.node=new E(t),!0}get_info(){return k.get({url:this.node.getRpcUrl("get_info")})}abi_json_to_bin(t){return k.post({url:this.node.getRpcUrl("abi_json_to_bin"),data:t})}push_transaction(t,e,n){return n||(n="none"),k.post({url:this.node.getRpcUrl("push_transaction"),data:{compression:n,transaction:t,signatures:e}})}push_transaction_all(t){return k.post({url:this.node.getRpcUrl("push_transaction"),data:t})}signTransaction(t){if(!this.node)throw new Error("EOS chain need to initialize.");return i.send("eosTransactionSign",{transaction:t,network:{blockchain:"eos",chainId:this.node.getChainID()}})}customSignProvider({buf:t,sign:e,transaction:n}){return new Promise((t,e)=>{this.signTransaction(n).then(n=>{n.error?e(n.error):t(n.result)})})}getEos(){if("undefined"==typeof Eos)throw new Error("Eos.js not found!");if(void 0===this.node)throw new Error("EOS chain need to initialize.");return Eos({httpEndpoint:this.node.getHttpEndPoint(),chainId:this.node.getChainID(),signProvider:this.customSignProvider})}getAccount(){return new Promise((t,e)=>{i.send("eosGetAccount").then(e=>{this.account.setAccount(e.account),this.node.setNode(e.node),e.authority&&this.account.setAccountPermission(e.authority),t(e)},e)})}};var I=new class{constructor(){this.blockchains=[new g,new f,new N]}getBlockchain(t){return this.blockchains.find(e=>e.chain===t)}getBlockchains(){return this.blockchains}};let C=new class extends u{constructor(){super(),I.getBlockchains(),I.getBlockchains().map(t=>{this[t.chain]=t})}};"undefined"!=typeof window&&(window.mathwallet=C);e.default=C}]);